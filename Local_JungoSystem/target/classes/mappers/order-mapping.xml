<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="usernamespace"> 
	
	<!-- order 은 mybatis-config.xml에서 정의한 Alias명 (com.gntech.dto.orderDTO) -->
	
	<!-- ************************index************************** -->
	<!-- 전체리스트 -->
	<select id="ListIndex" resultType="order">
		SELECT * FROM order_tb WHERE checkYN = 'N' and status = '검토중' ORDER BY id DESC
	</select>
	
	<!-- 신청내역 조회 -->
	<select id="SelectIndex" resultType="order" parameterType="Integer">
		SELECT * FROM order_tb WHERE id = #{id}
	</select>
	
	<!-- 신청내역 수락(매입가변동x) -->
	<update id="CheckYIndex" parameterType="order">
		UPDATE order_tb SET checkYN = 'Y', status = '진행중', return_price = #{return_price} WHERE id = #{id}
	</update>
	
	<!-- 신청내역 수락(매입가변동o) -->
	<update id="CheckYIndexPrice" parameterType="order">
		UPDATE order_tb SET checkYN = 'Y', status = '매입가검토중', return_price = #{return_price} WHERE id = #{id}
	</update>
	
	<!-- 신청내역 취소 -->
	<update id="CheckNIndex" parameterType="Integer">
		UPDATE order_tb SET checkYN = 'N', status = '거래취소', return_price = 0 WHERE id = #{id}
	</update>
	<!-- ************************************************************ -->
	
	<!-- ************************check******************************** -->
	<!-- 진행중인 상태 리스트 -->
	<select id="ListCheck" resultType="order">
		SELECT * FROM order_tb WHERE status = '진행중' OR status = '매입가검토중' ORDER BY id DESC
	</select>
	
	<!-- 검토내역 상세조회 -->
	<select id="SelectCheck" resultType="order" parameterType="Integer">
		SELECT * FROM order_tb WHERE id = #{id}
	</select>
	
	<!-- 검토내역 메모 입력 -->
	<update id="InsertMemo" parameterType="order">
		UPDATE order_tb SET memo = #{memo} WHERE id = #{id}
	</update>
	<!-- ************************************************************ -->
	
	<!-- ************************result******************************** -->
	<!-- 결과내역 리스트 -->
	<select id="ListResult" resultType="order">
		SELECT * FROM order_tb WHERE status = '거래취소' OR status = '거래완료' ORDER BY id DESC
	</select>
	<!-- ************************************************************ -->
	
	
</mapper>
